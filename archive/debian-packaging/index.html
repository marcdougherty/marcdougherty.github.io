<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Building Debian packages for my own use. &#183; Marc Dougherty</title>
<meta name=title content="Building Debian packages for my own use. &#183; Marc Dougherty"><link rel=canonical href=https://www.marcdougherty.com/archive/debian-packaging/><link type=text/css rel=stylesheet href=/css/main.bundle.min.1d8b820a57a192ce1bb9342d9dd1d66b0ffb9953b2faa5f7d0af952364b54857f002bd95c41f483b7beda5debdf1572876ee24b166e43a54d970d2079df6c8bb.css integrity="sha512-HYuCClehks4buTQtndHWaw/7mVOy+qX30K+VI2S1SFfwAr2VxB9IO3vtpd698Vcodu4ksWbkOlTZcNIHnfbIuw=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.17ffe617e664d257760ee5f71869a6d9328d3613601c03a2eb7a194bbfb06ddc629a70f7b348e6e9446e81d0789555aebce09d27debd0329fc297601a1ee6a77.js integrity="sha512-F//mF+Zk0ld2DuX3GGmm2TKNNhNgHAOi63oZS7+wbdximnD3s0jm6URugdB4lVWuvOCdJ969Ayn8KXYBoe5qdw==" data-copy data-copied></script><script src=/js/zoom.min.js></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Building Debian packages for my own use."><meta property="og:description" content="I&rsquo;ve been a debian/ubuntu user for years, but had always been intimidated by the packaging process (because i tried to read the New Maintainer&rsquo;s Guide). I decided to give it a shot recently, because I was building experimental software for the raspberry pi, and grew tired for scp and rsync.
Note: The advice below does not abide by the debian packaging policy.
Vincent Bernat&rsquo;s Pragmatic Debian Packaging is a great place to get started."><meta property="og:type" content="article"><meta property="og:url" content="https://www.marcdougherty.com/archive/debian-packaging/"><meta property="article:section" content="archive"><meta property="article:published_time" content="2018-07-17T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-23T18:04:44-08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Building Debian packages for my own use."><meta name=twitter:description content="I&rsquo;ve been a debian/ubuntu user for years, but had always been intimidated by the packaging process (because i tried to read the New Maintainer&rsquo;s Guide). I decided to give it a shot recently, because I was building experimental software for the raspberry pi, and grew tired for scp and rsync.
Note: The advice below does not abide by the debian packaging policy.
Vincent Bernat&rsquo;s Pragmatic Debian Packaging is a great place to get started."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Archives","name":"Building Debian packages for my own use.","headline":"Building Debian packages for my own use.","abstract":"I\u0026rsquo;ve been a debian\/ubuntu user for years, but had always been intimidated by the packaging process (because i tried to read the New Maintainer\u0026rsquo;s Guide). I decided to give it a shot recently, because I was building experimental software for the raspberry pi, and grew tired for scp and rsync.\nNote: The advice below does not abide by the debian packaging policy.\nVincent Bernat\u0026rsquo;s Pragmatic Debian Packaging is a great place to get started.","inLanguage":"en","url":"https:\/\/www.marcdougherty.com\/archive\/debian-packaging\/","author":{"@type":"Person","name":"Marc Dougherty"},"copyrightYear":"2018","dateCreated":"2018-07-17T00:00:00\u002b00:00","datePublished":"2018-07-17T00:00:00\u002b00:00","dateModified":"2023-02-23T18:04:44-08:00","mainEntityOfPage":"true","wordCount":"976"}]</script><meta name=author content="Marc Dougherty"><link href=https://github.com/muncus rel=me><link href=https://twitter.com/muncus rel=me><link href=https://dev.to/muncus rel=me><link href=https://medium.com/@muncus rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-31G86DYMCL"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-31G86DYMCL")</script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Marc Dougherty</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Blog</p></a><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Tags</p></a><a href=/archive/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Archive</p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400" style=margin-right:5px><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Blog</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Tags</p></a></li><li class=mt-1><a href=/archive/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Archive</p></a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Building Debian packages for my own use.</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2018-07-17 00:00:00 +0000 UTC">2018-07-17</time><span class="px-2 text-primary-500">&#183;</span><time datetime="2023-02-23 18:04:44 -0800 -0800">Updated: 2023-02-23</time><span class="px-2 text-primary-500">&#183;</span><span>976 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">5 mins</span></div><div class="flex flex-row flex-wrap items-center"></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="toc-right mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#so-why>So&mldr; why?</a></li><li><a href=#before-we-start>Before we start</a></li><li><a href=#generate-boilerplate-dh_make>Generate boilerplate: <code>dh_make</code></a></li><li><a href=#customize-the-boilerplate-for-your-needs>Customize the boilerplate for your needs</a></li><li><a href=#trials-and-errors-debuild>Trials and Errors: <code>debuild</code></a></li></ul></li><li><a href=#helpers-and-other-considerations>Helpers, and other considerations</a><ul><li><a href=#install-and-conffile>Install and Conffile</a></li><li><a href=#helper-dh-golang>Helper: <code>dh-golang</code></a></li><li><a href=#helper-dh-systemd>Helper: <code>dh-systemd</code></a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#so-why>So&mldr; why?</a></li><li><a href=#before-we-start>Before we start</a></li><li><a href=#generate-boilerplate-dh_make>Generate boilerplate: <code>dh_make</code></a></li><li><a href=#customize-the-boilerplate-for-your-needs>Customize the boilerplate for your needs</a></li><li><a href=#trials-and-errors-debuild>Trials and Errors: <code>debuild</code></a></li></ul></li><li><a href=#helpers-and-other-considerations>Helpers, and other considerations</a><ul><li><a href=#install-and-conffile>Install and Conffile</a></li><li><a href=#helper-dh-golang>Helper: <code>dh-golang</code></a></li><li><a href=#helper-dh-systemd>Helper: <code>dh-systemd</code></a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><p>I&rsquo;ve been a debian/ubuntu user for <strong>years</strong>, but had always been intimidated by
the packaging process (because i tried to read the <a href=https://www.debian.org/doc/manuals/maint-guide/ target=_blank>New Maintainer&rsquo;s
Guide</a>).
I decided to give it a shot recently, because I was building experimental
software for the raspberry pi, and grew tired for <code>scp</code> and <code>rsync</code>.</p><blockquote><p>Note: The advice below does not abide by the debian packaging policy.</p></blockquote><p>Vincent Bernat&rsquo;s <a href=https://vincent.bernat.im/en/blog/2016-pragmatic-debian-packaging target=_blank>Pragmatic Debian
Packaging</a>
is a great place to get started. Unfortunately, I only found it near the end of
my efforts.</p><h3 class="relative group">So&mldr; why?<div id=so-why class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#so-why aria-label=Anchor>#</a></span></h3><p>I had been tinkering with several different raspberry-pi-based projects, and I
found copying around whole directories from my computer (where I do most of the
coding) to the pi was becoming tedious. I was also looking for a clean and
simple way to cleanly remove a project if I later decided it was no longer
needed.</p><p>I had looked into a few other &lsquo;installation methods&rsquo;, like shell scripts, and
tarballs, etc. But none of them seemed to be quite simple enough to set up.</p><p>&ldquo;Simple?&rdquo; you say, &ldquo;you picked <em>debian packages</em> because you wanted simple?!&rdquo;</p><p>Well, no. It was not simple, but it does teach me more about debian packages,
which is sure to be beneficial down the line.</p><h3 class="relative group">Before we start<div id=before-we-start class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#before-we-start aria-label=Anchor>#</a></span></h3><p>There is a great deal of tooling built around debian packaging, but if we start
with the robots, there will be cleanup work to do later.</p><ol><li><p>set the environment variables <code>DEBEMAIL</code> to your email address, and
<code>DEBFULLNAME</code> to your full (first + last) name. These are used in the
autogenerated steps to come, and its easier to set them now than to fix the
generated output.</p></li><li><p>(Optional) put the following in <code>~/.devscripts</code>, which is read by many debian
tools:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Do not require directories to conform to packagename-version standard.</span>
</span></span><span class=line><span class=cl><span class=nv>DEVSCRIPTS_CHECK_DIRNAME_LEVEL</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=c1># dont rename the directory when the version number changes.</span>
</span></span><span class=line><span class=cl><span class=nv>DEBCHANGE_PRESERVE</span><span class=o>=</span>no
</span></span><span class=line><span class=cl><span class=c1># Dont sign packages. I just build them for me, so signing is pointless.</span>
</span></span><span class=line><span class=cl><span class=nv>DEBUILD_DPKG_BUILDPACKAGE_OPTS</span><span class=o>=</span><span class=s2>&#34;-uc -us&#34;</span>
</span></span></code></pre></div></li></ol><h3 class="relative group">Generate boilerplate: <code>dh_make</code><div id=generate-boilerplate-dh_make class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#generate-boilerplate-dh_make aria-label=Anchor>#</a></span></h3><p>I started by creating a basic debian package with <code>dh_make --native</code>. This gives
me a &ldquo;native&rdquo; debian package, meaning that there is no separate source tarball
to worry about. For my use case, i felt this was best, as it avoids the
intermediate step of tarring up my files. This approach can be found in an
<a href=https://www.debian.org/doc/manuals/maint-guide/advanced.en.html#native-dh-make target=_blank>appendix of the debian maintainer docs</a></p><p><code>dh_make --native --packagename=$pkgname_$version</code></p><p>Where <code>$pkgname</code> is the name of the package you&rsquo;re building, and <code>$version</code> is
some arbitrary version number.</p><p>See <a href=https://www.debian.org/doc/manuals/maint-guide/dother.en.html#sourcef target=_blank>docs on source/format</a>
for more information about native vs non-native packages.</p><p>This command will generate a <code>debian/</code> directory, with lots of files in it.
Anything that ends in <code>.ex</code> is an example, and can safely be deleted if you
wish.</p><h3 class="relative group">Customize the boilerplate for your needs<div id=customize-the-boilerplate-for-your-needs class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#customize-the-boilerplate-for-your-needs aria-label=Anchor>#</a></span></h3><p>The most important two files generated are <code>debian/control</code> and <code>debian/rules</code>.</p><h4 class="relative group"><code>debian/control</code><div id=debiancontrol class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#debiancontrol aria-label=Anchor>#</a></span></h4><p>The control file is metadata about your package. there are several placeholders
in there, like <code>Description</code> and <code>Section</code> which should be filled in.</p><p><code>Build-Deps</code> is a bit harder, and should include packages needed to build the
package. <code>Depends</code> should list packages required for your package to function.
I often guess at the right packages, and test by running a package build.</p><h4 class="relative group"><code>debian/rules</code><div id=debianrules class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#debianrules aria-label=Anchor>#</a></span></h4><p>This is actually a Makefile, with rules for building your package. Thanks to
debhelper (<code>dh</code> and friends), this file is typically short in my experience.
There&rsquo;s a variety of helper utils for specific purposes (for example,
<code>dh-golang</code> helps build packages written in Go, and is discussed below).</p><h3 class="relative group">Trials and Errors: <code>debuild</code><div id=trials-and-errors-debuild class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#trials-and-errors-debuild aria-label=Anchor>#</a></span></h3><p><code>debuild</code> is the main tool for building packages. now that we&rsquo;ve customized some
of the debian build files, its time to give it a shot. It probably wont work,
but it <strong>will</strong> tell us what needs to be fixed. The <code>lintian</code> tool makes helpful
suggestions that are probably worth fixing, and points out placeholders that
need to be filled in.</p><p>The build process assumes that there&rsquo;s a toplevel Makefile, though if you are
packaging a simple collection of files, this is not necessary. See the section
below on <a href=#install-and-conffile>Install and Configuration</a>.</p><p>Eventually, you should end up with a functional debian package in the <strong>parent</strong>
directory of your package. If that&rsquo;s all you needed, you&rsquo;re done!</p><h2 class="relative group">Helpers, and other considerations<div id=helpers-and-other-considerations class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#helpers-and-other-considerations aria-label=Anchor>#</a></span></h2><h3 class="relative group">Install and Conffile<div id=install-and-conffile class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#install-and-conffile aria-label=Anchor>#</a></span></h3><p>For packages that do not require compilation, or are platform-agnostic (e.g.
python scripts), a Makefile feels a bit overwhelming. There&rsquo;s a simpler
approach: <code>debian/install</code>. this file describes how files from the package build
directory should be installed by the package.</p><p>For example, a directory with files <code>a</code>, <code>b</code>, and <code>c</code> might choose to install
into different directories like this:</p><pre tabindex=0><code>a /usr/bin/
b /usr/sbin/
c /etc/
</code></pre><p>That file <code>c</code> looks like a configuration file, and we dont want to overwrite
with the package version when we upgrade. <code>debian/conffiles</code> provides a
mechanism for this. Just include the path to the <em>installed</em> configuration file
(i.e. <code>etc/c</code>) in here, and dpkg will treat it as a configuration file.</p><h3 class="relative group">Helper: <code>dh-golang</code><div id=helper-dh-golang class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#helper-dh-golang aria-label=Anchor>#</a></span></h3><p>The debian go team has a <a href=https://go-team.pages.debian.net/packaging.html target=_blank>golang packaging
guide</a> for full details, but
here&rsquo;s the short version:</p><ul><li>install <code>dh-golang</code>, which is a deb helper for making go packages.</li><li>in <code>debian/rules</code> set <code>DH_GOPKG</code> to the name of your go package (what you&rsquo;d
usually <code>go get</code>)</li><li>in <code>debian/rules</code>, add the following options to the <code>dh</code> invocation:
<code>--buildsystem=golang --with=golang</code></li><li>run <code>debuild</code> again, and hopefully get a go package!</li></ul><p>For binary-only packages, set <code>DH_GOLANG_BUILDPKG</code> in <code>rules</code>, pointing to only
the packages that are binaries (which are all under <code>cmd</code>, right?)</p><h3 class="relative group">Helper: <code>dh-systemd</code><div id=helper-dh-systemd class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#helper-dh-systemd aria-label=Anchor>#</a></span></h3><p>If you are creating services to run at startup, say on a raspberry pi, you&rsquo;ll
likely want to include some systemd configuration. There are some docs for
<a href=https://wiki.debian.org/Teams/pkg-systemd/Packaging target=_blank>dh-systemd</a>.</p><p>For debhelper versions >= 10, systemd is activated by default, according to the
above.</p><p>add a systemd file as <code>debian/packagename.systemd</code>, and it will be included in
the deb package.</p></div></div><script>var oid="views_archive/2018-07-17-debian-packaging.md",oid_likes="likes_archive/2018-07-17-debian-packaging.md"</script><script type=text/javascript src=/js/page.min.b06a29d42a4ed16787978e2eee1e8c797b7698db2bc14ccee78f5c80ac566fc996190a73ad80a5e987558474b20b96fa38f7d85b405f165ff72b7b163c5ad11b.js integrity="sha512-sGop1CpO0WeHl44u7h6MeXt2mNsrwUzO549cgKxWb8mWGQpzrYCl6YdVhHSyC5b6OPfYW0BfFl/3K3sWPFrRGw=="></script></section><footer class="pt-8 max-w-prose print:hidden"></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2024
Marc Dougherty</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js integrity="sha512-YgYLskf03itt3kWQNmj++2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://www.marcdougherty.com/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>